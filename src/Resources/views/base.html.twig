<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Halteverbot online bestellen</title>

    <base href="{{ app.request.getSchemeAndHttpHost() }}"/>

    <link rel="stylesheet" href="{{ asset('bundles/chuckkihvziframe/css/normalize.css') }}" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="https://www.static-immobilienscout24.de/fro/core/3.0.1-0/css/core.min.css" />

<!--    <link rel="stylesheet" href="{{ asset('bundles/chuckkihvziframe/css/jquery-ui.min.css') }}" type="text/css"/>-->
    <link rel="stylesheet" href="{{ asset('bundles/chuckkihvziframe/css/display.css') }}" type="text/css"/>
    <link rel="stylesheet" href="{{ asset('bundles/chuckkihvziframe/css/datepicker.css') }}" type="text/css"/>

    <script src="https://kit.fontawesome.com/92df57eace.js"></script>


    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/corejs-typeahead/1.2.1/typeahead.bundle.min.js" integrity="sha256-VCsWOz+0GuHdS/sIICtQNTFJdbaDI80rxvoB7BXabrU=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="//www.static-immobilienscout24.de/fro/core/3.0.1-0/js/core.min.js"></script>
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
-->
    <script type="text/javascript">

        function checkForm() {

            if (document.orderform.town.value == "notown") {
                alert("Bitte wählen Sie zunächst eine Stadt aus.");
                //document.orderform.town.focus();
                document.getElementById('top').focus();
                return false;
            }

            if (document.orderform.lang.value == "") {
                alert("Bitte geben Sie die Länge Ihrer Halteverbotszone an.");
                return false;
            } else if (parseInt("" + document.orderform.lang.value + "") > 20) {
                alert("Bei Bestellungen von Halteverbotszonen über 20 m Länge wird der Preis wahrscheinlich abweichen. Bitte setzen Sie sich NACH der Bestellung bei Bedarf mit uns per E-Mail oder kostenlos über unsere Hotline in Verbindung.");
                //return true;
            }

            if (document.orderform.str.value == "") {
                alert("Bitte geben Sie eine Straße für das Halteverbot an.");
                document.orderform.str.focus();
                return false;
            }

            if (document.orderform.hnr.value == "") {
                alert("Bitte geben Sie eine Hausnummer für das Halteverbot an.");
                document.orderform.hnr.focus();
                return false;
            }

            if (document.orderform.plz.value.length < 5) {
                alert("Bitte geben Sie in Deutschland eine fünfstellige Postleitzahl an.");
                document.orderform.plz.focus();
                return false;
            }


            if (document.orderform.zusatz.value == "") {
                alert("Bitte geben Sie unbedingt den gewünschten Zeitraum für die Aufschrift an.");
                document.orderform.zusatz.focus();
                return false;
            }


            var plzmatch = false;
            $.ajax({
                url: '/ajax/checkPLZ.php'
                    + '?plz='
                    + encodeURI(document.orderform.plz.value)
                    + '&town='
                    + encodeURI(document.orderform.town.value),
                success: function (result) {
                    //alert(result);
                    if (parseInt(result) < 1) {
                        //
                    } else {
                        plzmatch = true;
                    }
                },
                async: false
            });

            if (!plzmatch) {
                alert("Diese Kombination aus Stadt und Postleitzahl ist uns nicht bekannt. Bitte kontaktieren Sie uns ggf. nach der Bestellung.");
            }

            if (document.orderform.detailtext.value == "") {

                var myRadio = $('input[name="verwendung"]');
                var checkedValue = myRadio.filter(':checked').val();

                if (checkedValue == "baustelle" || checkedValue == "sonstiges") {

                    alert("Bitte beschreiben Sie Ihr Vorhaben genauer.");
                    // $('#vorhaben_fehler').show();
                    return false;
                }
            }

            if (document.orderform.extrabreit.value == "") {

                var myRadio = $('input[name="car_type"]');
                var checkedValue = myRadio.filter(':checked').val();

                if (checkedValue == "lkw") {

                    alert("Bitte geben Sie an, ob Sie eine einseitige oder beidseitige Halteverbotszone benötigen.");
                    document.orderform.extrabreit.focus();
                    return false;
                }
            }


            return true;
        }

        /* checkout */
        function checkCustomerData() {

            if (document.customer_data.email.value == "") {
                alert("Bitte geben Sie unbedingt Ihre E-Mail Adresse an.");
                document.customer_data.email.focus();
                return false;
            }

            if (document.customer_data.email.value != document.customer_data.email_repeat.value) {
                alert("Bitte überprüfen Sie die Eingabe der E-Mail-Adressen.");
                document.customer_data.email.focus();
                return false;
            }

            var myRadio = $('input[name="anrede"]');
            var checkedValue = myRadio.filter(':checked').val();

            if (checkedValue == "undefined" || checkedValue == undefined) {

                alert("Bitte geben Sie eine Anrede an.");
                return false;
            }

            if (document.customer_data.anrede.value == "") {
                alert("Bitte geben Sie eine Anrede an.");
                return false;
            }

            if (document.customer_data.firstname.value == "" || document.customer_data.lastname.value == "") {
                alert("Bitte geben Sie Ihren Vor- und Nachnamen an.");
                document.customer_data.firstname.focus();
                return false;
            }

            if (document.customer_data.strasse.value == "" || document.customer_data.nr.value == "") {
                alert("Bitte geben Sie Ihre Straße und Hausnummer an.");
                document.customer_data.strasse.focus();
                return false;
            }

            if (document.customer_data.kunde_plz.value == "" || document.customer_data.ort.value == "") {
                alert("Bitte geben Sie Ihre PLZ und Ihren Wohnort an.");
                document.customer_data.kunde_plz.focus();
                return false;
            }

            if (document.customer_data.fon.value == "") {
                alert("Bitte geben Sie Ihre Telefonnummer an.");
                document.customer_data.fon.focus();
                return false;
            }


            return true;
        }

    </script>

</head>
<body style="max-width:980px;" onLoad="document.getElementById('top').focus();">

{% block noscript %}
    <noscript>
        <style>
            .page-cover {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    height: 100%;
    z-index: 100;
}
            .page-cover p {
    width: 95%;
    font-size: 15px;
}
.page-cover p {
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translate(-50%, -10%);
    width: 50%;
    color: white;
    background: rgba(0,0,0,0.6);
    padding: 2rem;
    border-radius: 4px;
}
            body:before {
                content: " ";
                width: 100%;
                height: 100%;
                position: fixed;
                top: 0;
                left: 0;
                background: rgba(0, 0, 0, 0.7);
                z-index: 99;
            }</style>
        <div class="page-cover"><p>Um den vollen Funktionsumfang und die Bestellfunktion von platzda.de zu nutzen,
                benötigen
                Sie JavaScript. Eine Bestellung mit deaktiviertem JavaScript ist nicht möglich, da einige Funktionen im
                Bestellvorgang dann nicht zur Verfügung stehen. Gerne nehmen wir Ihre Bestellung auch telefonisch unter
                unserer kostenlosen Hotline (<a href="tel://08007528923" style="font-weight:bold;">0800 - 7528923</a>)
                entgegen. <br><br>Eine Anleitung zum Einschalten von JavaScript finden Sie <a
                    href="https://www.enable-javascript.com/de/" target="_blank">hier</a>.</p></div>
    </noscript>
{% endblock %}

<a name="top" id="top" href="#"></a>
<h2>Halteverbot bestellen</h2>


{% block content %}

{% endblock %}

{% block footer %}
    <div id="footer">
        <a href="extern/page/agb/#top" class="agb-link">AGB</a> |
        <a href="extern/page/widerruf/#top" class="agb-link">Widerruf</a> |
        <a href="extern/page/datenschutzerklaerung" class="agb-link">Datenschutz</a> |
        <a href="extern/page/impressum/#top" class="imprint-link">Impressum</a>
    </div>
{% endblock %}

{% block jsbottom %}
<script type="text/javascript">

    $('#town').live('change', function () {

        var town = $(this).val();

        /* neu genehmigungsfeld */
        if ($("option:selected", this).attr("rel") == "kunde") {

            $('#police-nope').click();
            $('#gen_alle').hide();
            $('#gen_kunde').show();
            $('#genehmigungsinfo').hide();
            $('#kunde_upload').show();

        } else {
            $('#police-yes').click();
            $('#gen_alle').show();
            $('#gen_kunde').hide();
            $('#genehmigungsinfo').show();
            $('#kunde_upload').hide();

        }

        /* neu hinweisfeld */
        if ($("option:selected", this).hasClass("hinweis")) {
            $.post('/ajax/getHinweis.php', {town: town}, function (res) {
                $('.stadthinweis').html(res);
                $('.stadthinweis').show();
            });
        } else {
            $('.stadthinweis').hide();
        }

        /* neu zusatzfrage */
        if ($("option:selected", this).hasClass("zusatzfrage")) {
            $.post('/ajax/getZusatz.php', {town: town}, function (res) {
                var ar = res.split('::::');
                var name = ar[0];
                var frage = ar[1];
                var err = ar[2];
                $('#zusatzheadline').html(name);
                $('#zusatz_rechts').html(frage);
                $('#zusatzfrage_fehler').html(err);
                $('#zusatzfrage_fehler').hide();

                $('#zusatzfrage').show();
            });
        } else {
            $('#zusatzfrage_antwort').html('');
            $('#zusatz_links').html();
            $('#zusatzfrage').hide();
            $('#zusatzheadline').html('');
        }

        /* neu verwendung */
        if ($("option:selected", this).hasClass("verwendung")) {
            $('.vumzug').attr("checked", "checked");
            $('#verwendung_online').show();
        } else {
            $('.vumzug').attr("checked", "checked");
            $('#verwendung_online').hide();
        }

        /* neu car_type */
        if ($("option:selected", this).hasClass("extrabreit")) {
            $('#car_choose').show();
            $('.transporter').attr("checked", "checked");
            $('#extrabreit option:first').attr("selected", "selected");
            $('#extrabreit').hide();
            $('#extratext').hide();
        } else {
            $('#car_choose').hide();
            $('.transporter').attr("checked", "checked");
            $('#extrabreit option:first').attr("selected", "selected");
            $('#extratext').hide();
        }

        /* neu preislink */
        if ($("option:selected", this).val() == "notown") {
            $('#preisliste').html('Zur <a href="/Halteverbot/">Preisliste</a>.');
        } else {
            $('#preisliste').html('Zur Preisliste für <a href="/Halteverbot/' + $("option:selected", this).val() + '/">' + $("option:selected", this).val() + '</a>.');
        }


        var town = $("option:selected", this).val();

        /* neu preis plus */
        if ($("option:selected", this).val() == "notown") {
            $('.pallgemein').show();
            $('.pstadt').hide();
        } else {
            $('.pallgemein').hide();
            $.post('/ajax/getPlus.php', {town: town}, function (res) {

                if (res != '-')
                    $('.pstadt').html("<strong>kostenpflichtig; " + res + " EUR</strong>");
                else
                    $('.pstadt').html("<strong>im Preis des Halteverbots enthalten</strong>");

                $('.pstadt').show();
                // -- Stadt in Select oben setzen
                $("select#town3 option").filter(function () {
                    return $(this).val() == town;
                }).attr('selected', true);
                $('#town4').html($("option:selected", 'select#town3').text());
            });

        }


        /* neu iFrame price table */
        var town = $(this).val();
        $.post('/iframes/getPriceTable.inc.php', {city: town, ajax: true}, function (res) {
            $('#prices').replaceWith(res);
        });


    });

    $(document).on('change', '#police-yes', function () {

        $('#ajaxprice').html('<img src="/img/ajax-loader-ball.gif" />');

        var town = $('#town').val();
        var police = $(this).val();

        $.post('/ajax/calcPrice.php', {town: town, police: police}, function (res) {
            $('#ajaxprice').html('&euro; ' + res + ',-');
        });

        $('#hinweisgenehmigung').hide();
        $('#kunde_upload').hide();
        $('#genehmigungsinfo').show();
    });

    $(document).on('change', '#police-nope', function () {

        $('#ajaxprice').html('<img src="/img/ajax-loader-ball.gif" />');

        var town = $('#town').val();
        var police = $(this).val();

        $.post('/ajax/calcPrice.php', {town: town, police: police}, function (res) {
            $('#ajaxprice').html('&euro; ' + res + ',-');
        });

        $('#hinweisgenehmigung').show();
        $('#kunde_upload').show();
        $('#genehmigungsinfo').hide();
    });


    $('.verwendung').live('change', function () {

        if ($(this).val() == "umzug") {
            $('#detailtext').removeClass('required_for_submit');
        } else if ($(this).val() == "baustelle") {
            $('#detailtext').removeClass('required_for_submit');
            $('#detailtext').addClass('required_for_submit');
        } else if ($(this).val() == "sonstiges") {
            $('#detailtext').removeClass('required_for_submit');
            $('#detailtext').addClass('required_for_submit');
        }
    });


    $('.car_type').live('click', function () {

        if ($(this).val() == "transporter") {
            $('#extrabreit option:first').attr("selected", "selected");
            $('#extrabreit').hide();
            $('#extratext').hide();
        } else {
            $('#extrabreit').show();
            $('#extratext').show();
        }
    });


    // checkbox sammelrechnung
    var sizecart = 1;
    if ($('#firma_address').val() == "" || sizecart < 2) {

        $('.sammel').hide();
    }

    $('#firma_address').live('keyup', function () {

        if ($('#firma_address').val() != "") {

            if (sizecart > 1) {

                $('.sammel').fadeIn();
            }
        } else {
            $('.sammel').fadeOut();
        }
    });


    function ScrollTop() {
        if (document.all) {
            document.body.scrollLeft = 0;
            document.body.scrollTop = 0;
        } else {
            //window.scrollTo(0,top);
        }
    }

</script>
{% endblock %}


</body>
</html>
